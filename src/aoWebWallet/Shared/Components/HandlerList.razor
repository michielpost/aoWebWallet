@using ArweaveAO.Models
@inject AODataClient aoDataClient

<MudPaper Class="pa-4">
    <MudText Typo="Typo.h6">Handlers</MudText>
    @if (handlers == null)
    {
        <MudProgressCircular Color="Color.Default" Indeterminate="true" />
    }
    else if (handlers.Count == 0)
    {
        <MudText>No handlers found.</MudText>
    }
    else
    {
        <MudList T="string">
            @foreach (var handler in handlers)
            {
                <MudListItem>@handler</MudListItem>
            }
        </MudList>
    }
</MudPaper>

@code {
    [Parameter]
    public required string ProcessId { get; set; }

    [Parameter]
    public required string OwnerId { get; set; }

    private List<string>? handlers;

    protected override async Task OnParametersSetAsync()
    {
        handlers = null;
        handlers = await aoDataClient.GetHandlers(ProcessId, OwnerId);
        StateHasChanged();
    }
}