@page "/token/{tokenId}"
@using aoWebWallet.Models
@inherits MvvmComponentBase<TokenDetailViewModel>
@inject IDialogService DialogService
@inject ISnackbar Snackbar
@inject NavigationManager NavigationManager;
@inject TokenDataService dataService;

<PageTitle>@Program.PageTitlePostFix</PageTitle>


<MudContainer Class="mt-16 px-8" MaxWidth="MaxWidth.False">
    <MudText Typo="Typo.h5">Token Explorer</MudText>

    <DataLoaderProgress DataLoader="BindingContext.Token.DataLoader" Title="tokens" />

    <MudStack>
        @if (BindingContext.Token.Data != null)
        {
            var token = BindingContext.Token.Data;

            <MudPaper Class="pa-4 mb-14 mt-4">
                <MudStack Row="true">
                    <MudAvatar Image="@UrlHelper.GetArweaveUrl(token.TokenData?.Logo)" Size="Size.Large" />
                    <MudStack Justify="Justify.Center" Spacing="0">
                        <MudText Typo="Typo.body1">@token.TokenData?.Name</MudText>
                        <MudText Typo="Typo.body2">@token.TokenData?.Ticker</MudText>
                        <MudText Class="KodeMono" Typo="Typo.subtitle1">@token.TokenId</MudText>
                    </MudStack>
                </MudStack>
            </MudPaper>
        }

    </MudStack>

    <DataLoaderProgress DataLoader="BindingContext.TokenTransferList.DataLoader" Title="transactions" />

    <MudStack>
        @if (BindingContext.TokenTransferList.Data != null)
        {
            <MudText Typo="Typo.h5">Transactions</MudText>

            <MudTimeline TimelinePosition="TimelinePosition.Left">
                @foreach (var transfer in BindingContext.TokenTransferList.Data)
                {
                    <TransactionComponent transfer="transfer" />
                }
            </MudTimeline>
        }

    </MudStack>
</MudContainer>

@code
{
    [Parameter]
    public string? TokenId { get; set; }


}
